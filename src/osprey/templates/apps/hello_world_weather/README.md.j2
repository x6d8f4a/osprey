# {{ app_display_name }} Agent - Quick Start

A super simple weather agent for learning Osprey Framework basics. Get it running in under 10 minutes!

## What It Does

Ask about current weather in any location and get instant results! The current weather conditions are provided by a simple mock API that simulates weather data.

## Quick Setup

### 1. Configure Your API Key

Create a `.env` file in your project root:

```bash
# Copy the example template
cp .env.example .env

# Edit .env and add your API key
# We recommend Claude Haiku 4.5, but any OpenAI-compatible provider works
```

Set one of these API keys in your `.env` file:
- `ANTHROPIC_API_KEY=your-key` (Recommended)
- `CBORG_API_KEY=your-key` (LBNL institutional)
- `OPENAI_API_KEY=your-key`
- `GOOGLE_API_KEY=your-key`

### 2. Run the Agent

```bash
# Start the chat interface
osprey chat
```

### 3. Try These Queries

```
"What's the weather in San Francisco?"
"How's the weather in Tokyo?"
"Tell me about the weather in London"
"What's the weather like?" (uses "local")
```

That's it! No external APIs, no containers, no complex setup.

## What You'll Learn

### Framework Basics
- **Context Classes**: Type-safe data structures (`CurrentWeatherContext`)
- **Capabilities**: Business logic components (`current_weather`)
- **Mock Services**: No external dependencies needed
- **LLM Integration**: Automatic query understanding
- **LangGraph Native**: Uses modern `@capability_node` decorator patterns

✅ **Migrated**: This example uses the modern LangGraph-native framework patterns with `@capability_node` decorator, streaming integration, and helper functions for context storage.

### Simple Architecture
```
User Query → LLM Classifier → Weather Capability → Mock API → Results
```

## Files Overview

```
{{ package_name }}/
├── registry.py                    # Component registration
├── context_classes.py             # Weather data structure
├── mock_weather_api.py            # Fake weather service
├── capabilities/
│   └── current_weather.py        # Main weather logic
└── README.md                      # This file
```

## How It Works

1. **User asks**: "What's the weather in London?"
2. **LLM understands**: Classifies as weather request, extracts location
3. **Capability runs**: Processes the request for "London"
4. **Mock API**: Generates random weather data for London
5. **Result returned**: Structured weather data

The mock API accepts any location string and returns simulated weather data, so you can ask about any city or place!

## Next Steps

Once this is working:
1. **Explore the code**: See how capabilities work
2. **Try different locations**: The mock API works with any location
3. **Try the Control Assistant tutorial**: Production-grade control system integration
4. **Build your own**: Use this as a template

## Key Code Patterns

### Context Class (Data Structure)
```python
class CurrentWeatherContext(CapabilityContext):
    CONTEXT_TYPE: ClassVar[str] = "CURRENT_WEATHER"

    location: str = Field(description="Location name")
    temperature: float = Field(description="Temperature in Celsius")
    conditions: str = Field(description="Weather conditions description")
    timestamp: datetime = Field(description="Timestamp of weather data")
```

### Capability (Business Logic)
```python
@capability_node
class CurrentWeatherCapability(BaseCapability):
    name = "current_weather"
    description = "Get current weather conditions for a location"

    @staticmethod
    async def execute(state: AgentState, **kwargs):
        # LangGraph streaming
        writer = get_stream_writer()
        if writer:
            writer({"event_type": "status", "message": "Getting weather..."})

        # Business logic
        weather = weather_api.get_current_weather(location)

        # Context storage using helper functions
        return StateManager.store_context(state, "CURRENT_WEATHER", context_key, weather)
```

## Troubleshooting

**Not working?** Check:
- Is your API key configured correctly in `.env`?
- Do you have the API key environment variable set correctly (e.g., `ANTHROPIC_API_KEY`)?
- Is the provider/model specified in `config.yml` correct for your API key?
- Any errors in the terminal output?

**Need help?** This is the simplest possible example - if it's not working, there might be a configuration issue. Check that:
1. Your `.env` file exists and contains your API key
2. Your `config.yml` has the correct provider name (e.g., "anthropic", not "cborg")
3. The model ID in `config.yml` matches a valid model for your provider

---

**Goal**: Get this running in under 10 minutes, then explore the Control Assistant tutorial for production patterns!
